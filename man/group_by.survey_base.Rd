% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/06-group-by.R
\name{group_by.survey_base}
\alias{group_by.survey_base}
\alias{ungroup.survey_base}
\title{Group and ungroup a survey design object}
\usage{
\method{group_by}{survey_base}(.data, ..., .add = FALSE, .drop = dplyr::group_by_drop_default(.data))

\method{ungroup}{survey_base}(x, ...)
}
\arguments{
\item{.data}{A survey design object.}

\item{...}{<\code{\link[rlang:args_data_masking]{data-masking}}> Variables to group
by. Computed expressions (e.g., \code{cut(age, breaks)}) are supported.}

\item{.add}{Logical. If \code{TRUE}, add to existing groups rather than
replacing them.}

\item{.drop}{Passed to \code{dplyr::group_by_drop_default()}.}

\item{x}{A survey design object (for \code{ungroup()}).}
}
\value{
The survey object with \verb{@groups} updated.
}
\description{
\itemize{
\item \code{group_by()} stores grouping column names in \verb{@groups}. Unlike dplyr,
\strong{no \code{grouped_df} attribute} is attached to \verb{@data} â€” grouping is kept on
the survey object itself. Phase 1 estimation functions and \code{\link[dplyr:mutate]{dplyr::mutate()}} read
\verb{@groups} to apply grouped calculations.
\item \code{ungroup()} with no arguments removes all groups. With column arguments it
performs a \strong{partial ungroup}, removing only the named columns from
\verb{@groups}.
}
}
\section{Functions}{
\itemize{
\item \code{ungroup(survey_base)}: Remove grouping variables.

}}
\examples{
df <- data.frame(y = rnorm(100), wt = runif(100, 1, 5),
                 region = sample(c("N","S","E","W"), 100, TRUE))
d  <- surveycore::as_survey(df, weights = wt)

# Group and then compute group means via mutate()
d2 <- d |>
  group_by(region) |>
  mutate(region_mean = mean(y))

# Partial ungroup
d3 <- group_by(d, region)
d4 <- ungroup(d3)          # remove all groups

}
\concept{grouping}
